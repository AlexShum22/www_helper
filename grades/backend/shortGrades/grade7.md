## Грейд 7  

### Theory
#### Что такое API
API (Application programming interface) — это контракт, который предоставляет программа. «Ко мне можно обращаться так  
и так, я обязуюсь делать то и это».  

#### Авторизация
Авторизация является функцией определения прав доступа к ресурсам и управления этим доступом. Авторизация —  
предоставление этому лицу возможностей в соответствие с положенными ему правами или проверка наличия прав при  
попытке выполнить какое-либо действие. Например, авторизацией являются лицензии на осуществление определённой деятельности.  

#### Понятие о паттернах проектирования
Паттерны (или шаблоны) проектирования описывают типичные способы решения часто встречающихся  
проблем при проектировании программ.  

Вы можете вполне успешно работать, не зная ни одного паттерна. Но зная паттерны, вы  
получаете ещё один инструмент в свой личный набор профессионала  

#### Docker - подробно
@inheritdoc  

### Language

#### ООП в PHP Пространства имён
В PHP пространства имен используются для решения двух проблем, с которыми сталкиваются авторы библиотек и приложений  
при создании повторно используемых элементов кода, таких как классы и функции:  

- Конфликт имен между вашим кодом и внутренними классами/функциями/константами PHP или сторонними.
- Возможность создавать псевдонимы (или сокращения) для Ну_Очень_Длинных_Имен, чтобы облегчить первую проблему и  
улучшить читаемость исходного кода.

Пространства имен PHP предоставляют возможность группировать логически связанные классы, интерфейсы, функции и константы.  

Пространства имен объявляются с помощью зарезервированного слова namespace. Файл, содержащий пространство имен, должен  
содержать его объявление в начале перед любым другим кодом, кроме зарезервированного слова declare.  
```php
<?php
namespace vendor\controllers;

class MyController
{

}
```

Широко применяется совместно с PSR-4  
Данный стандарт описывает спецификацию автозагрузки классов на основе путей к файлам. Он полностью совместим  
(и может использоваться как дополнение) с любой другой спецификацией автозагрузки, включая PSR-0.  
Данный стандарт также описывает правила размещения файлов, предназначенных для автозагрузки.  

#### PHP Итераторы
PHP 5 предоставляет такой способ объявления объектов, который дает возможность пройти по списку элементов данного  
объекта, например, с помощью оператора foreach. По умолчанию, в этом обходе (итерации) будут участвовать все видимые  
свойства объекта.  

Итерируемым может быть любой объект или массив.  

#### PHP Генераторы
```php
$even = [];
$numbers = [1,2,3,4,5,6,7,8,9,10];
$generator = getEvens($numbers);

function getEvens($numbers)
{
    foreach ($numbers as $number) {
        if ($number % 2 == 0) {
            yield $number;
        }
    }
}

foreach ($generator as $value) {
   print($value);
}

// 2, 4, 6, 8, 10
```

### Framework

#### Yii2 Структура приложения - контроллеры и действия
Контроллеры являются частью MVC архитектуры. Это объекты классов, унаследованных от yii\base\Controller, отвечающие  
за обработку запроса и генерирование ответа. В сущности, после обработки запроса приложениями, контроллеры  
проанализируют входные данные, передадут их в модели, вставят результаты модели в представления, и в конечном  
итоге сгенерируют исходящие ответы.  

Контроллеры состоят из действий, которые являются основными блоками, к которым может обращаться конечный  
пользователь и запрашивать исполнение того или иного функционала. В контроллере может быть одно или несколько действий.  

Маршруты могут иметь следующий формат:  
- ControllerID/ActionID
- ModuleID/ControllerID/ActionID

```php
namespace app\controllers;

use Yii;
use app\models\Post;
use yii\web\Controller;

class PostController extends Controller
{
    public function actionView($id)
    {
        return $this->render('view', [
            'data' => 1,
        ]);
    }

    public function actionCreate()
    {
        $model = new Post;

        if ($model->load(Yii::$app->request->post()) && $model->save()) {
            return $this->redirect(['view', 'id' => $model->id]);
        } else {
            return $this->render('create', [
                'model' => $model,
            ]);
        }
    }
}
```

#### Yii2 Структура приложения - представления
Виды - это часть MVC архитектуры, это код, который отвечает за представление данных конечным пользователям.  
В веб приложениях виды создаются обычно в виде шаблонов, которые по сути PHP скрипты, в основном содержащие  
HTML код и код PHP, отвечающий за представление и внешний вид. Виды управляются компонентом приложения view,  
который содержит часто используемые методы для упорядочивания видов и их рендеринга.  

```php
<?php
use yii\helpers\Html;
use yii\widgets\ActiveForm;

/**
* @var $this yii\web\View 
* @var $form yii\widgets\ActiveForm
* @var $model app\models\LoginForm
*/

$this->title = 'Вход';
?>
<h1><?= Html::encode($this->title) ?></h1>

<p>Пожалуйстауйста<?php $form = ActiveForm::begin(); ?>
    <?= $form->field($model, 'username') ?>
    <?= $form->field($model, 'password')->passwordInput() ?>
    <?= Html::submitButton('Login') ?>
<?php ActiveForm::end(); ?>
```

#### Yii2 Структура приложения - модели
Модели являются частью архитектуры MVC. Они представляют собой объекты бизнес данных, правил и логики.  
Так же в вебе модели могут служить маппером для базы данных. Стоит различать доменную логику и логику приложения.  

```php
namespace app\models;

use yii\base\Model;

class ContactForm extends Model
{
    private string $name;
    
    public function setName(string $name)
    {
        $this->name = $name;
    }

    public function getName()
    {
        return $this->name;
    }
}
```

### Testing

#### Методология разработки тестов
состав теста  
подход AAA  
```
class CalculatorTests
{
	public void Sum_2Plus5_7Returned()
	{
		// arrange
		var calc = new Calculator();

		// act
		var res = calc.Sum(2,5);

		// assert
		Assert.AreEqual(7, res);
	}
}
```
жизненный цикл теста  
#### Тестовое окружение
#### Инструменты: Codeception
@inheritdoc  

### Storage
#### Нормальные формы 4НФ6НФ
Нормальная форма Бойса — Кодда (BCNF)
Переменная отношения находится в нормальной форме Бойса — Кодда (иначе — в усиленной третьей нормальной форме) тогда  
и только тогда, когда каждая её нетривиальная и неприводимая слева функциональная зависимость имеет в качестве своего  
детерминанта некоторый потенциальный ключ.  

Четвёртая нормальная форма (4NF)  
Переменная отношения находится в четвёртой нормальной форме, если она находится в нормальной форме Бойса — Кодда  
и не содержит нетривиальных многозначных зависимостей.  

Пятая нормальная форма (5NF)  
Переменная отношения находится в пятой нормальной форме (иначе — в проекционно-соединительной нормальной форме)  
тогда и только тогда, когда каждая нетривиальная зависимость соединения в ней определяется потенциальным ключом  
(ключами) этого отношения.  

Доменно-ключевая нормальная форма (DKNF)  
Переменная отношения находится в ДКНФ тогда и только тогда, когда каждое наложенное на неё ограничение является  
логическим следствием ограничений доменов и ограничений ключей, наложенных на данную переменную отношения.  

Шестая нормальная форма (6NF)  
Переменная отношения находится в шестой нормальной форме тогда и только тогда, когда она удовлетворяет всем  
нетривиальным зависимостям соединения. Из определения следует, что переменная находится в 6НФ тогда и только тогда,  
когда она неприводима, то есть не может быть подвергнута дальнейшей декомпозиции без потерь. Каждая переменная  
отношения, которая находится в 6НФ, также находится и в 5НФ.  

### DB

#### PostgreSQL CREATE ALTER DROP
#### PostgreSQL Ограничения
@inheritdoc  

### Frontend

#### AJAX  
#### Сетевые запросы  
JavaScript может отправлять сетевые запросы на сервер и подгружать новую информацию по мере необходимости.  

Например, мы можем использовать сетевой запрос, чтобы:  
Отправить заказ,  
Загрузить информацию о пользователе,  
Запросить последние обновления с сервера,  

Для сетевых запросов из JavaScript есть широко известный термин «AJAX» (аббревиатура от Asynchronous JavaScript And XML).  
XML мы использовать не обязаны, просто термин старый, поэтому в нём есть это слово. Возможно, вы его уже где-то слышали.  

Метод fetch() — современный и очень мощный, поэтому начнём с него. Он не поддерживается старыми  
(можно использовать полифил), но поддерживается всеми современными браузерами.  

XMLHttpRequest – это встроенный в браузер объект, который даёт возможность делать HTTP-запросы к серверу без  
перезагрузки страницы.  
Несмотря на наличие слова «XML» в названии, XMLHttpRequest может работать с любыми данными, а не только с XML.  
Мы можем загружать/скачивать файлы, отслеживать прогресс и многое другое.  

Протокол WebSocket («веб-сокет»), описанный в спецификации RFC 6455, обеспечивает возможность обмена данными  
между браузером и сервером через постоянное соединение. Данные передаются по нему в обоих направлениях в виде  
«пакетов», без разрыва соединения и дополнительных HTTP-запросов.  

WebSocket особенно хорош для сервисов, которые нуждаются в постоянном обмене данными, например онлайн игры,  
торговые площадки, работающие в реальном времени, и т.д.  

### DevOps

#### Передача дампов PostgreSQL
Идея, стоящая за этим методом, заключается в генерации текстового файла с командами SQL, которые при выполнении на  
сервере пересоздадут базу данных в том же самом состоянии, в котором она была на момент выгрузки.  
Postgres Pro предоставляет для этой цели вспомогательную программу pg_dump. Простейшее применение  
этой программы выглядит так:  
```
pg_dump имя_базы > файл_дампа
```

Текстовые файлы, созданные pg_dump, предназначаются для последующего чтения программой psql.  
Общий вид команды для восстановления дампа:  
```
psql имя_базы < файл_дампа
```

### Git

#### Выбор ревизии
@inheritdoc  

#### Откат
```git
git reset [-q] [<tree-ish>] [--] <pathspec>…​
git reset [-q] [--pathspec-from-file=<file> [--pathspec-file-nul]] [<tree-ish>]
git reset (--patch | -p) [<tree-ish>] [--] [<pathspec>…​]
git reset [--soft | --mixed [-N] | --hard | --merge | --keep] [-q] [<commit>]
```

### Misc

#### Postman
Основное предназначение приложения — создание коллекций с запросами к вашему API. Любой разработчик или тестировщик,  
открыв коллекцию, сможет с лёгкостью разобраться в работе вашего сервиса. Ко всему прочему, Postman позволяет  
проектировать дизайн API и создавать на его основе Mock-сервер. Вашим разработчикам больше нет необходимости  
тратить время на создание "заглушек". Реализацию сервера и клиента можно запустить одновременно.  
Тестировщики могут писать тесты и производить автоматизированное тестирование прямо из Postman.  
А инструменты для автоматического документирования по описаниям из ваших коллекций сэкономят  
время на ещё одну "полезную фичу".  

#### codesniffer
Code sniffer — инструмент для инспекции кода на соответствие стандартам.  
Существует огромное количество стандартов кодирования на PHP.  

#### Состав и механизм работы веб‑сервера
@inheritdoc  